import{A as o}from"./apexcharts-1dz0OY9g.js";$(document).ready(function(){var s="#7367F0",r="#b9c3cd",w="#e7e7e7",q="#A9A2F6",C="#f29292",k="#EA5455",O="#FF9F43",z="#FFC085",A={chart:{height:270,toolbar:{show:!1},type:"line"},stroke:{curve:"smooth",dashArray:[0,8],width:[4,2]},grid:{borderColor:w},legend:{show:!1},colors:[C,r],fill:{type:"gradient",gradient:{shade:"dark",inverseColors:!1,gradientToColors:[s,r],shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1},tickPlacement:"on"},yaxis:{tickAmount:5,labels:{style:{color:r},formatter:function(t){return t>999?(t/1e3).toFixed(1)+"الف":t}}},tooltip:{x:{show:!1}},series:[{name:"This Period",data:[]},{name:"Last Period",data:[]}]},S=new o(document.querySelector("#revenue-chart"),A);S.render();var i="week",n="sublimation";function f(t,e){$.ajax({url:"/charts/meters",type:"GET",cache:!1,data:{period:t,machine:e},success:function(a){a&&($("#current-revenue").text((a.currentTotal||0).toLocaleString()),$("#last-revenue").text((a.lastTotal||0).toLocaleString()),a.labels&&S.updateOptions({xaxis:{categories:a.labels}}),S.updateSeries([{name:"الحالي",data:a.currentData||[]},{name:"السابق",data:a.lastData||[]}]))},error:function(a){console.error("Error fetching chart data",a)}})}f(i,n);function D(){$.ajax({url:"/charts/inventory-stock",type:"GET",cache:!1,success:function(t){I.updateOptions({colors:t.colors,xaxis:{categories:t.labels},series:t.ink_series}),$("#paper-stock-sub").text(t.paper.sublimation),$("#paper-stock-dtf").text(t.paper.dtf),t.paper.dtf>100?$(".dtf_bar").addClass("progress-bar-primary"):$(".dtf_bar").addClass("progress-bar-danger"),t.paper.sublimation>100?$(".sub_bar").addClass("progress-bar-primary"):$(".sub_bar").addClass("progress-bar-danger")},error:function(t){console.error("Error fetching inventory stock data",t)}})}D(),setInterval(D,3e4),$(".revenue-period-item").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#dropdownItem2").text(a),i=e,f(i,n)}),$(".revenue-machine-item").on("click",function(t){t.preventDefault();var e=$(this).data("machine"),a=$(this).text();$("#dropdownMachine").text(a),$("#chart-title").text(a),n=e,f(i,n)});var L={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[O],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"الطلبات",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},l;document.querySelector("#line-area-chart-4")&&(l=new o(document.querySelector("#line-area-chart-4"),L),l.render(),E());function E(){$.ajax({url:"/charts/orders",type:"GET",cache:!1,success:function(t){if(t){$("#orders-received-total").text(t.totalOrders||0),t.labels&&l.updateOptions({xaxis:{categories:t.labels}});var e=t.series&&t.series[0]?t.series[0].data:[];l.updateSeries([{name:"الطلبات",data:e}])}},error:function(t){console.error("Error fetching orders data",t)}})}var P={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:["#28C76F"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"اوردرات استراس",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},p;document.querySelector("#line-area-chart-2")&&(p=new o(document.querySelector("#line-area-chart-2"),P),p.render(),j());function j(){$.ajax({url:"/charts/stras-orders",type:"GET",cache:!1,success:function(t){if(t){$("#stras-orders-total").text(t.totalOrders||0),t.labels&&p.updateOptions({xaxis:{categories:t.labels}});var e=t.series&&t.series[0]?t.series[0].data:[];p.updateSeries([{name:"اوردرات استراس",data:e}])}},error:function(t){console.error("Error fetching stras orders data",t)}})}var B={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[k],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"اوردرات ترتر",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},m;document.querySelector("#line-area-chart-3")&&(m=new o(document.querySelector("#line-area-chart-3"),B),m.render(),G());function G(){$.ajax({url:"/charts/tarter-orders",type:"GET",cache:!1,success:function(t){if(t){$("#tarter-orders-total").text(t.totalOrders||0),t.labels&&m.updateOptions({xaxis:{categories:t.labels}});var e=t.series&&t.series[0]?t.series[0].data:[];m.updateSeries([{name:"اوردرات ترتر",data:e}])}},error:function(t){console.error("Error fetching tarter orders data",t)}})}var s="#7367F0",M={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[s],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"العملاء",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},c;document.querySelector("#line-area-chart-1")&&(c=new o(document.querySelector("#line-area-chart-1"),M),c.render(),F());function F(){$.ajax({url:"/charts/customers",type:"GET",cache:!1,success:function(t){if(t){$("#customers-gained-total").text(t.totalCustomers||0),t.labels&&c.updateOptions({xaxis:{categories:t.labels}});var e=t.series&&t.series[0]?t.series[0].data:[];c.updateSeries([{name:"العملاء",data:e}])}},error:function(t){console.error("Error fetching customers data",t)}})}var R={chart:{stacked:!0,type:"bar",toolbar:{show:!1},height:300},plotOptions:{bar:{columnWidth:"10%"}},colors:[s,k],series:[{name:"العملاء الجدد",data:[]},{name:"العملاء المستمرون",data:[]}],grid:{borderColor:w,padding:{left:0,right:0}},legend:{show:!0,position:"top",horizontalAlign:"left",offsetX:0,fontSize:"14px",markers:{radius:50,width:10,height:10}},dataLabels:{enabled:!1},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1}},yaxis:{tickAmount:5,labels:{style:{color:r}}},tooltip:{x:{show:!1}}},d;document.querySelector("#client-retention-chart")&&(d=new o(document.querySelector("#client-retention-chart"),R),d.render(),g("week"));function g(t){$.ajax({url:"/charts/client-retention",type:"GET",cache:!1,data:{period:t},success:function(e){if(e){e.labels&&d.updateOptions({xaxis:{categories:e.labels}});var a=e.series&&e.series[0]?e.series[0].data:[],N=e.series&&e.series[1]?e.series[1].data:[];d.updateSeries([{name:"العملاء الجدد",data:a},{name:"العملاء المستمرون",data:N}])}},error:function(e){console.error("Error fetching client retention data",e)}})}var X={chart:{type:"bar",height:250,sparkline:{enabled:!0},toolbar:{show:!1}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.5,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100]}},states:{hover:{filter:"none"}},colors:[],series:[],grid:{show:!1,padding:{left:0,right:0}},plotOptions:{bar:{columnWidth:"45%",distributed:!0,endingShape:"rounded"}},tooltip:{x:{show:!0},y:{formatter:function(t){return t+" لتر"}}},xaxis:{type:"category",categories:[],labels:{show:!1}},noData:{text:"جاري التحميل...",style:{color:"#b9c3cd",fontSize:"14px"}}},I=new o(document.querySelector("#avg-session-chart"),X);I.render();var y="week";$(".client-retention-period").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#clientRetentionDropdown").text(a),y=e,g(e)});var y="month";$(".client-retention-period").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#clientRetentionDropdown").text(a),y=e,g(e)}),setInterval(function(){console.log("Auto-refresh triggered..."),f(i,n),l&&E(),c&&F(),d&&g(y)},3e4);var Y={chart:{height:325,type:"radialBar"},colors:[s,O,k,"#28C76F"],fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:[q,z,C,"#55D88D"],inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},plotOptions:{radialBar:{size:130,hollow:{size:"20%"},track:{strokeWidth:"100%",margin:15},dataLabels:{name:{fontSize:"18px"},value:{fontSize:"16px",formatter:function(t){return t}},total:{show:!0,label:"Total",formatter:function(t){return t.globals.seriesTotals.reduce((e,a)=>e+a,0)}}}}},series:[],labels:[],noData:{text:"Loading..."}},x=new o(document.querySelector("#product-order-chart"),Y);x.render();function T(t="7_days"){$.ajax({url:"/charts/inventory",type:"GET",data:{period:t},cache:!1,success:function(e){const a=e.series.map(Number);x.updateOptions({labels:e.labels}),x.updateSeries(a),e.stats&&($("#stat-paper-sub").text(e.stats.paper_sub+" متر"),$("#stat-paper-dtf").text(e.stats.paper_dtf+" متر"),$("#stat-ink-sub").text(e.stats.ink_sub+" لتر"),$("#stat-ink-dtf").text(e.stats.ink_dtf+" لتر"))},error:function(e){console.error("Error fetching inventory data",e)}})}T();var _="7_days";$(".inventory-period").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$(this).closest(".dropdown").find("#dropdownItem2").text(a),_=e,T(e)}),setInterval(function(){x&&T(_)},3e4);var W={chart:{height:270,toolbar:{show:!1},type:"line"},stroke:{curve:"smooth",dashArray:[0,8],width:[4,2]},grid:{borderColor:w},legend:{show:!1},colors:[C,r],fill:{type:"gradient",gradient:{shade:"dark",inverseColors:!1,gradientToColors:[s,r],shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1},tickPlacement:"on"},yaxis:{tickAmount:5,labels:{style:{color:r},formatter:function(t){return t+" M"}}},tooltip:{x:{show:!1}},series:[{name:"Current Consumption",data:[]},{name:"Last Consumption",data:[]}]},v=new o(document.querySelector("#stras-consumption-chart"),W);v.render();var h="week",u="stras";function b(t,e){$.ajax({url:"/charts/stras-tarter-consumption",type:"GET",cache:!1,data:{period:t,machine:e},success:function(a){$("#current-stras-consumption").text(a.currentTotal),$("#last-stras-consumption").text(a.lastTotal),v.updateOptions({xaxis:{categories:a.labels}}),v.updateSeries([{name:"الحالي",data:a.currentData},{name:"السابق",data:a.lastData}])},error:function(a){console.error("Error fetching stras consumption data",a)}})}b(h,u),$(".stras-period-item").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#dropdownStrasPeriod").text(a),h=e,b(h,u)}),$(".stras-machine-item").on("click",function(t){t.preventDefault();var e=$(this).data("machine"),a=$(this).text();$("#dropdownStrasMachine").text(a),$("#stras-chart-title").text(" ورق "+a),u=e,b(h,u)}),setInterval(function(){v&&b(h,u)},3e4)});
