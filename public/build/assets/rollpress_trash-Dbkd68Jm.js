$(document).ready(function(){var r=$(".data-thumb-view").DataTable({processing:!0,serverSide:!0,responsive:!1,ajax:{url:window.location.href},columns:[{data:"action",orderable:!1,searchable:!1,defaultContent:""},{data:"image",orderable:!1,searchable:!1,defaultContent:""},{data:"customer.name",defaultContent:"-"},{data:"fabrictype",defaultContent:"-"},{data:"meters",defaultContent:"-"},{data:"deleted_at",defaultContent:"-"}],columnDefs:[{targets:0,render:function(e,n,t,a){return`<div class="btn-group" role="group">
                        <button type="button" class="btn btn-icon btn-flat-success restore-btn" title="استعاده" data-id="${t.id}">
                            <i class="feather icon-rotate-ccw"></i>
                        </button>
                        <button type="button" class="btn btn-icon btn-flat-danger force-delete-btn" title="حذف نهائي" data-id="${t.id}">
                            <i class="feather icon-trash-2"></i>
                        </button>
                    </div>`}},{targets:1,render:function(e,n,t,a){let o="/core/images/elements/apple-watch.png";return t.order&&t.order.orders_imgs&&t.order.orders_imgs.length>0&&(o="/storage/"+t.order.orders_imgs[0].path),`<img style="height: 50px;" src="${o}" alt="Img">`}},{targets:5,render:function(e,n,t,a){return e?new Date(e).toLocaleString("ar-EG"):"-"}}],dom:'<"top"<"actions action-btns"B><"action-filters"lf>><"clear">rt<"bottom"<"actions">p>',oLanguage:{sLengthMenu:"_MENU_",sSearch:""},aLengthMenu:[[10,20,50,100],[10,20,50,100]],order:[[5,"desc"]],bInfo:!1,pageLength:10,buttons:[]});$(document).on("click",".restore-btn",function(e){var n=$(this).data("id");Swal.fire({title:"استعادة الطلب؟",text:"سيعود الطلب إلى قائمة الارشيف.",type:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"نعم، استعاده!",cancelButtonText:"الغاء",confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn btn-danger ml-1",buttonsStyling:!1}).then(function(t){t.value&&$.ajax({url:"/Rollpress/restore/"+n,type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(a){r.draw(),toastr.success("تم استعادة الطلب بنجاح","نجاح")},error:function(a){toastr.error("حدث خطأ أثناء الاستعادة","خطأ")}})})}),$(document).on("click",".force-delete-btn",function(e){var n=$(this).data("id");Swal.fire({title:"حذف نهائي؟",text:"لا يمكن التراجع عن هذا الاجراء!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"نعم، حذف نهائي!",cancelButtonText:"الغاء",confirmButtonClass:"btn btn-danger",cancelButtonClass:"btn btn-primary ml-1",buttonsStyling:!1}).then(function(t){t.value&&$.ajax({url:"/Rollpress/force-delete/"+n,type:"DELETE",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(a){r.draw(),toastr.success("تم الحذف النهائي بنجاح","نجاح")},error:function(a){toastr.error("حدث خطأ أثناء الحذف","خطأ")}})})})});
