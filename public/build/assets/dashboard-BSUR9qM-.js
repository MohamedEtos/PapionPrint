import{A as f}from"./apexcharts.esm-1dz0OY9g.js";$(document).ready(function(){var d="#7367F0",r="#b9c3cd",m="#e7e7e7",y="#f29292",v="#EA5455",w={chart:{height:270,toolbar:{show:!1},type:"line"},stroke:{curve:"smooth",dashArray:[0,8],width:[4,2]},grid:{borderColor:m},legend:{show:!1},colors:[y,r],fill:{type:"gradient",gradient:{shade:"dark",inverseColors:!1,gradientToColors:[d,r],shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1},tickPlacement:"on"},yaxis:{tickAmount:5,labels:{style:{color:r},formatter:function(e){return e>999?(e/1e3).toFixed(1)+"الف":e}}},tooltip:{x:{show:!1}},series:[{name:"This Period",data:[]},{name:"Last Period",data:[]}]},p=new f(document.querySelector("#revenue-chart"),w);p.render();var o="month",i="sublimation";function c(e,t){$.ajax({url:"/charts/meters",type:"GET",cache:!1,data:{period:e,machine:t},success:function(a){$("#current-revenue").text(a.currentTotal.toLocaleString()),$("#last-revenue").text(a.lastTotal.toLocaleString()),p.updateOptions({xaxis:{categories:a.labels}}),p.updateSeries([{name:"الحالي",data:a.currentData},{name:"السابق",data:a.lastData}])},error:function(a){console.error("Error fetching chart data",a)}})}c(o,i),$(".chart-dropdown .dropdown-item:not(.machine-item)").on("click",function(e){e.preventDefault();var t=$(this).data("period"),a=$(this).text();$("#dropdownItem2").text(a),o=t,c(o,i)}),$(".machine-item").on("click",function(e){e.preventDefault();var t=$(this).data("machine"),a=$(this).text();$("#dropdownMachine").text(a),$("#chart-title").text(a),i=t,c(o,i)});var b="#FF9F43",C={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[b],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"الطلبات",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},s;document.querySelector("#line-area-chart-4")&&(s=new f(document.querySelector("#line-area-chart-4"),C),s.render(),g());function g(){$.ajax({url:"/charts/orders",type:"GET",cache:!1,success:function(e){$("#orders-received-total").text(e.totalOrders),s.updateOptions({xaxis:{categories:e.labels}}),s.updateSeries([{name:"الطلبات",data:e.series[0].data}])},error:function(e){console.error("Error fetching orders data",e)}})}var d="#7367F0",k={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[d],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"العملاء",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},n;document.querySelector("#line-area-chart-1")&&(n=new f(document.querySelector("#line-area-chart-1"),k),n.render(),x());function x(){$.ajax({url:"/charts/customers",type:"GET",cache:!1,success:function(e){$("#customers-gained-total").text(e.totalCustomers),n.updateOptions({xaxis:{categories:e.labels}}),n.updateSeries([{name:"العملاء",data:e.series[0].data}])},error:function(e){console.error("Error fetching customers data",e)}})}var S={chart:{stacked:!0,type:"bar",toolbar:{show:!1},height:300},plotOptions:{bar:{columnWidth:"10%"}},colors:[d,v],series:[{name:"العملاء الجدد",data:[]},{name:"العملاء المستمرون",data:[]}],grid:{borderColor:m,padding:{left:0,right:0}},legend:{show:!0,position:"top",horizontalAlign:"left",offsetX:0,fontSize:"14px",markers:{radius:50,width:10,height:10}},dataLabels:{enabled:!1},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1}},yaxis:{tickAmount:5,labels:{style:{color:r}}},tooltip:{x:{show:!1}}},l;document.querySelector("#client-retention-chart")&&(l=new f(document.querySelector("#client-retention-chart"),S),l.render(),h("month"));function h(e){$.ajax({url:"/charts/client-retention",type:"GET",cache:!1,data:{period:e},success:function(t){l.updateOptions({xaxis:{categories:t.labels}}),l.updateSeries([{name:"العملاء الجدد",data:t.series[0].data},{name:"العملاء المستمرون",data:t.series[1].data}])},error:function(t){console.error("Error fetching client retention data",t)}})}var u="month";$(".client-retention-period").on("click",function(e){e.preventDefault();var t=$(this).data("period"),a=$(this).text();$("#clientRetentionDropdown").text(a),u=t,h(t)});var u="month";$(".client-retention-period").on("click",function(e){e.preventDefault();var t=$(this).data("period"),a=$(this).text();$("#clientRetentionDropdown").text(a),u=t,h(t)}),console.log("Dashboard Auto-Refresh Initialized"),setInterval(function(){console.log("Auto-refresh triggered..."),c(o,i),s&&g(),n&&x(),l&&h(u)},3e4)});
