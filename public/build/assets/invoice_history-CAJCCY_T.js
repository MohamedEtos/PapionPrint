$(document).ready(function(){console.log("Invoice History JS loaded");var a=$(".data-list-view").DataTable({processing:!0,serverSide:!0,ajax:{url:"/invoices/history-data",error:function(t,e,s){console.error("DataTable AJAX Error:",e,s),console.error("Response:",t.responseText)}},columns:[{data:"image",name:"image",orderable:!1,searchable:!1},{data:"type",name:"type"},{data:"details",name:"details"},{data:"customer_name",name:"customer_name"},{data:"quantity",name:"quantity"},{data:"unit_price",name:"custom_price"},{data:"total",name:"total",orderable:!1},{data:"sent_date",name:"sent_date"},{data:"sent_status",name:"sent_status"},{data:"created_at",name:"created_at"}],order:[[9,"desc"]],language:{sProcessing:"جارٍ التحميل...",sLengthMenu:"أظهر _MENU_ مدخلات",sZeroRecords:"لم يعثر على أية سجلات",sInfo:"إظهار _START_ إلى _END_ من أصل _TOTAL_ مدخل",sInfoEmpty:"يعرض 0 إلى 0 من أصل 0 سجل",sInfoFiltered:"(منتقاة من مجموع _MAX_ مُدخل)",sInfoPostFix:"",sSearch:"ابحث:",sUrl:"",oPaginate:{sFirst:"الأول",sPrevious:"السابق",sNext:"التالي",sLast:"الأخير"}},dom:'<"top"<"actions action-btns"B><"action-filters"f>>rt<"bottom"<"actions"i><"pagination"><"actions"l><"actions clearfix">>',buttons:[{extend:"print",text:"طباعة",titleAttr:"Print",className:"btn btn-outline-primary"},{extend:"copy",text:"نسخ",titleAttr:"Copy",className:"btn btn-outline-primary"},{extend:"csv",text:"CSV",titleAttr:"CSV",className:"btn btn-outline-primary"}],responsive:!0,pageLength:10,lengthMenu:[10,25,50,100]});$(".data-list-view tbody").on("click","tr",function(){var t=a.row(this).data();t&&t.id&&($("#invoice-details-modal").modal("show"),$("#invoice-details-body").html('<div class="text-center"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>'),$.ajax({url:"/invoices/archive-details/"+t.id,method:"GET",success:function(e){$("#invoice-details-body").html(e.html)},error:function(){$("#invoice-details-body").html('<div class="alert alert-danger">حدث خطأ أثناء تحميل التفاصيل</div>')}}))}),console.log("DataTable initialized"),$(".dataTables_filter input").addClass("form-control"),$(".dataTables_length select").addClass("form-control")});
