$(document).ready(function(){console.log("Invoice History JS loaded");var s=$(".data-list-view").DataTable({processing:!0,serverSide:!0,ajax:{url:"/invoices/history-data",error:function(e,a,t){console.error("DataTable AJAX Error:",a,t),console.error("Response:",e.responseText)}},columns:[{data:"id",name:"invoice_id"},{data:"user_id",name:"user_id"},{data:"customer_name",name:"customer_name"},{data:"items_count",name:"items_count",searchable:!1},{data:"grand_total",name:"grand_total"},{data:"created_at",name:"created_at"},{data:"action",name:"action",orderable:!1,searchable:!1}],order:[[4,"desc"]],language:{sProcessing:"جارٍ التحميل...",sLengthMenu:"أظهر _MENU_ مدخلات",sZeroRecords:"لم يعثر على أية سجلات",sInfo:"إظهار _START_ إلى _END_ من أصل _TOTAL_ مدخل",sInfoEmpty:"يعرض 0 إلى 0 من أصل 0 سجل",sInfoFiltered:"(منتقاة من مجموع _MAX_ مُدخل)",sInfoPostFix:"",sSearch:"ابحث:",sUrl:"",oPaginate:{sFirst:"الأول",sPrevious:"السابق",sNext:"التالي",sLast:"الأخير"}},dom:'<"top"<"actions action-btns"B><"action-filters"f>>rt<"bottom"<"actions"i><"pagination"><"actions"l><"actions clearfix">>',buttons:[{extend:"print",text:"طباعة",titleAttr:"Print",className:"btn btn-outline-primary"},{extend:"copy",text:"نسخ",titleAttr:"Copy",className:"btn btn-outline-primary"},{extend:"csv",text:"CSV",titleAttr:"CSV",className:"btn btn-outline-primary",charset:"utf-8",bom:!0},{extend:"excel",text:"Excel",titleAttr:"Excel",className:"btn btn-outline-primary"}],responsive:!0,pageLength:10,lengthMenu:[10,25,50,100]});$(".data-list-view tbody").on("click","tr",function(){var e=s.row(this).data();e&&e.id&&($("#invoice-details-modal").modal("show"),$("#invoice-details-body").html('<div class="text-center"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>'),$.ajax({url:"/invoices/invoice-details/"+e.id,method:"GET",success:function(a){$("#invoice-details-body").html(a.html);var t=$("#details-customer-name").val();t?$("#invoiceDetailsModalLabel").text("تفاصيل الفاتورة والطلب الي السيد /  "+t):$("#invoiceDetailsModalLabel").text("تفاصيل الفاتورة والطلب")},error:function(){$("#invoice-details-body").html('<div class="alert alert-danger">حدث خطأ أثناء تحميل التفاصيل</div>')}}))}),console.log("DataTable initialized"),$(".dataTables_filter input").addClass("form-control"),$(".dataTables_length select").addClass("form-control")});
