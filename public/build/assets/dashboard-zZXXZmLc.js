import{A as o}from"./apexcharts-1dz0OY9g.js";$(document).ready(function(){var i="#7367F0",r="#b9c3cd",x="#e7e7e7",E="#A9A2F6",b="#f29292",k="#EA5455",S="#FF9F43",I="#FFC085",z={chart:{height:270,toolbar:{show:!1},type:"line"},stroke:{curve:"smooth",dashArray:[0,8],width:[4,2]},grid:{borderColor:x},legend:{show:!1},colors:[b,r],fill:{type:"gradient",gradient:{shade:"dark",inverseColors:!1,gradientToColors:[i,r],shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1},tickPlacement:"on"},yaxis:{tickAmount:5,labels:{style:{color:r},formatter:function(t){return t>999?(t/1e3).toFixed(1)+"الف":t}}},tooltip:{x:{show:!1}},series:[{name:"This Period",data:[]},{name:"Last Period",data:[]}]},w=new o(document.querySelector("#revenue-chart"),z);w.render();var s="week",n="sublimation";function f(t,e){$.ajax({url:"/charts/meters",type:"GET",cache:!1,data:{period:t,machine:e},success:function(a){a&&($("#current-revenue").text((a.currentTotal||0).toLocaleString()),$("#last-revenue").text((a.lastTotal||0).toLocaleString()),a.labels&&w.updateOptions({xaxis:{categories:a.labels}}),w.updateSeries([{name:"الحالي",data:a.currentData||[]},{name:"السابق",data:a.lastData||[]}]))},error:function(a){console.error("Error fetching chart data",a)}})}f(s,n);function T(){$.ajax({url:"/charts/inventory-stock",type:"GET",cache:!1,success:function(t){O.updateOptions({colors:t.colors,xaxis:{categories:t.labels},series:t.ink_series}),$("#paper-stock-sub").text(t.paper.sublimation),$("#paper-stock-dtf").text(t.paper.dtf),t.paper.dtf>100?$(".dtf_bar").addClass("progress-bar-primary"):$(".dtf_bar").addClass("progress-bar-danger"),t.paper.sublimation>100?$(".sub_bar").addClass("progress-bar-primary"):$(".sub_bar").addClass("progress-bar-danger")},error:function(t){console.error("Error fetching inventory stock data",t)}})}T(),setInterval(T,3e4),$(".revenue-period-item").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#dropdownItem2").text(a),s=e,f(s,n)}),$(".revenue-machine-item").on("click",function(t){t.preventDefault();var e=$(this).data("machine"),a=$(this).text();$("#dropdownMachine").text(a),$("#chart-title").text(a),n=e,f(s,n)});var A={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[S],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"الطلبات",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},l;document.querySelector("#line-area-chart-4")&&(l=new o(document.querySelector("#line-area-chart-4"),A),l.render(),D());function D(){$.ajax({url:"/charts/orders",type:"GET",cache:!1,success:function(t){if(t){$("#orders-received-total").text(t.totalOrders||0),t.labels&&l.updateOptions({xaxis:{categories:t.labels}});var e=t.series&&t.series[0]?t.series[0].data:[];l.updateSeries([{name:"الطلبات",data:e}])}},error:function(t){console.error("Error fetching orders data",t)}})}var i="#7367F0",q={chart:{height:100,type:"area",toolbar:{show:!1},sparkline:{enabled:!0},grid:{show:!1,padding:{left:0,right:0}}},colors:[i],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.7,opacityTo:.5,stops:[0,80,100]}},series:[{name:"العملاء",data:[]}],xaxis:{labels:{show:!1},axisBorder:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!0}}},c;document.querySelector("#line-area-chart-1")&&(c=new o(document.querySelector("#line-area-chart-1"),q),c.render(),F());function F(){$.ajax({url:"/charts/customers",type:"GET",cache:!1,success:function(t){if(t){$("#customers-gained-total").text(t.totalCustomers||0),t.labels&&c.updateOptions({xaxis:{categories:t.labels}});var e=t.series&&t.series[0]?t.series[0].data:[];c.updateSeries([{name:"العملاء",data:e}])}},error:function(t){console.error("Error fetching customers data",t)}})}var P={chart:{stacked:!0,type:"bar",toolbar:{show:!1},height:300},plotOptions:{bar:{columnWidth:"10%"}},colors:[i,k],series:[{name:"العملاء الجدد",data:[]},{name:"العملاء المستمرون",data:[]}],grid:{borderColor:x,padding:{left:0,right:0}},legend:{show:!0,position:"top",horizontalAlign:"left",offsetX:0,fontSize:"14px",markers:{radius:50,width:10,height:10}},dataLabels:{enabled:!1},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1}},yaxis:{tickAmount:5,labels:{style:{color:r}}},tooltip:{x:{show:!1}}},d;document.querySelector("#client-retention-chart")&&(d=new o(document.querySelector("#client-retention-chart"),P),d.render(),p("week"));function p(t){$.ajax({url:"/charts/client-retention",type:"GET",cache:!1,data:{period:t},success:function(e){if(e){e.labels&&d.updateOptions({xaxis:{categories:e.labels}});var a=e.series&&e.series[0]?e.series[0].data:[],G=e.series&&e.series[1]?e.series[1].data:[];d.updateSeries([{name:"العملاء الجدد",data:a},{name:"العملاء المستمرون",data:G}])}},error:function(e){console.error("Error fetching client retention data",e)}})}var L={chart:{type:"bar",height:250,sparkline:{enabled:!0},toolbar:{show:!1}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.5,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100]}},states:{hover:{filter:"none"}},colors:[],series:[],grid:{show:!1,padding:{left:0,right:0}},plotOptions:{bar:{columnWidth:"45%",distributed:!0,endingShape:"rounded"}},tooltip:{x:{show:!0},y:{formatter:function(t){return t+" لتر"}}},xaxis:{type:"category",categories:[],labels:{show:!1}},noData:{text:"جاري التحميل...",style:{color:"#b9c3cd",fontSize:"14px"}}},O=new o(document.querySelector("#avg-session-chart"),L);O.render();var m="month";$(".client-retention-period").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#clientRetentionDropdown").text(a),m=e,p(e)});var m="month";$(".client-retention-period").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#clientRetentionDropdown").text(a),m=e,p(e)}),setInterval(function(){console.log("Auto-refresh triggered..."),f(s,n),l&&D(),c&&F(),d&&p(m)},3e4);var j={chart:{height:325,type:"radialBar"},colors:[i,S,k,"#28C76F"],fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:[E,I,b,"#55D88D"],inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},plotOptions:{radialBar:{size:150,hollow:{size:"20%"},track:{strokeWidth:"100%",margin:15},dataLabels:{name:{fontSize:"18px"},value:{fontSize:"16px",formatter:function(t){return t}},total:{show:!0,label:"Total",formatter:function(t){return t.globals.seriesTotals.reduce((e,a)=>e+a,0)}}}}},series:[],labels:[],noData:{text:"Loading..."}},g=new o(document.querySelector("#product-order-chart"),j);g.render();function C(t="7_days"){$.ajax({url:"/charts/inventory",type:"GET",data:{period:t},cache:!1,success:function(e){const a=e.series.map(Number);g.updateOptions({labels:e.labels}),g.updateSeries(a),e.stats&&($("#stat-paper-sub").text(e.stats.paper_sub+" متر"),$("#stat-paper-dtf").text(e.stats.paper_dtf+" متر"),$("#stat-ink-sub").text(e.stats.ink_sub+" لتر"),$("#stat-ink-dtf").text(e.stats.ink_dtf+" لتر"))},error:function(e){console.error("Error fetching inventory data",e)}})}C();var _="7_days";$(".inventory-period").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$(this).closest(".dropdown").find("#dropdownItem2").text(a),_=e,C(e)}),setInterval(function(){g&&C(_)},3e4);var B={chart:{height:270,toolbar:{show:!1},type:"line"},stroke:{curve:"smooth",dashArray:[0,8],width:[4,2]},grid:{borderColor:x},legend:{show:!1},colors:[b,r],fill:{type:"gradient",gradient:{shade:"dark",inverseColors:!1,gradientToColors:[i,r],shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},xaxis:{labels:{style:{colors:r}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1},tickPlacement:"on"},yaxis:{tickAmount:5,labels:{style:{color:r},formatter:function(t){return t+" M"}}},tooltip:{x:{show:!1}},series:[{name:"Current Consumption",data:[]},{name:"Last Consumption",data:[]}]},v=new o(document.querySelector("#stras-consumption-chart"),B);v.render();var u="week",h="stras";function y(t,e){$.ajax({url:"/charts/stras-tarter-consumption",type:"GET",cache:!1,data:{period:t,machine:e},success:function(a){$("#current-stras-consumption").text(a.currentTotal),$("#last-stras-consumption").text(a.lastTotal),v.updateOptions({xaxis:{categories:a.labels}}),v.updateSeries([{name:"الحالي",data:a.currentData},{name:"السابق",data:a.lastData}])},error:function(a){console.error("Error fetching stras consumption data",a)}})}y(u,h),$(".stras-period-item").on("click",function(t){t.preventDefault();var e=$(this).data("period"),a=$(this).text();$("#dropdownStrasPeriod").text(a),u=e,y(u,h)}),$(".stras-machine-item").on("click",function(t){t.preventDefault();var e=$(this).data("machine"),a=$(this).text();$("#dropdownStrasMachine").text(a),$("#stras-chart-title").text(" ورق "+a),h=e,y(u,h)}),setInterval(function(){v&&y(u,h)},3e4)});
